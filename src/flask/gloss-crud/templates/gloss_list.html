{% extends "layout.html" %}
{% set title = "Glosses" %}
{% block content %}
  <div class="flex flex-wrap items-center justify-between gap-3">
    <div>
      <h1 class="text-3xl font-semibold">Glosses</h1>
      <p class="text-light">Grouped by ISO 639-3 language. Click a row to edit.</p>
    </div>
    <a href="{{ url_for('create_gloss') }}" class="btn btn-primary gap-2">
      <i data-lucide="plus"></i>
      <span>Add Gloss</span>
    </a>
  </div>

  {% if grouped_glosses %}
    <div class="overflow-x-auto">
      <table class="table table-xs table-zebra rounded-box border border-base-content/5">
        <thead>
          <tr>
            <th>Language</th>
            <th>Content</th>
            <th class="text-right">Actions</th>
          </tr>
        </thead>
        <tbody>
          {% for language, glosses in grouped_glosses %}
            {% for gloss in glosses %}
              <tr class="">
                <td class="uppercase">{{ language }}</td>
                <td class="whitespace-pre-line">
                  <a href="{{ url_for('edit_gloss', language=gloss.language, slug=gloss.slug) }}" class="link link-hover">
                    {{ gloss.content }}
                  </a>
                </td>
                <td class="text-right">
                  <div class="flex justify-end gap-2">
                    <a class="btn btn-sm" href="{{ url_for('edit_gloss', language=gloss.language, slug=gloss.slug) }}">
                      <i data-lucide="pencil"></i>
                    </a>
                    <form method="post" action="{{ url_for('delete_gloss', language=gloss.language, slug=gloss.slug) }}" onsubmit="return confirm('Delete this gloss?');">
                      <button class="btn btn-sm" type="submit">
                        <i data-lucide="trash-2"></i>
                      </button>
                    </form>
                  </div>
                </td>
              </tr>
            {% endfor %}
          {% endfor %}
        </tbody>
      </table>
    </div>
  {% else %}
    <div class="alert">
      <i data-lucide="info"></i>
      <span>No glosses yet. Add your first one.</span>
    </div>
  {% endif %}
{% endblock %}
